# YinChroma
YINアルゴリズムを採用した高精度・低遅延ギターチューナー。FletによるモダンなUIと、お手本音源のループ再生機能を備えたエンジニアのためのチューニングツール。

🎸 **\#YinChroma** は、PythonとFletで構築された、エンジニア視点の高精度ギターチューニングツールです。

従来のFFT（高速フーリエ変換）よりも低域の精度に優れた **YINアルゴリズム** を採用し、リアルタイムでのピッチ検出と、お手本音源のループ再生機能を両立させています。

## **🛠 特徴**

* **高精度ピッチ検出**: 音楽信号処理で定評のある **YINアルゴリズム** を自前実装。ギターの低音域でも安定した判定が可能です。  
* **モダンなUI**: **Flet (Flutter for Python)** を採用し、直感的でレスポンシブなダークテーマUIを提供します。  
* **ハイブリッド・チューニング**:  
  * **マイク入力モード**: 自分の弾いた音を「セント」単位で詳細に分析。  
  * **お手本再生モード**: 理想の音を聴きながら合わせるループ再生機能。  
* **ヘッドセットモード**: イヤホン使用を想定し、お手本音源の再生中もマイク入力を受け付けるか切り替え可能な実戦的機能を搭載。  
* **動的拡張性**: sound/ フォルダにWAVファイルを追加するだけで、UIボタンが自動的に生成されます（7弦ギターや変則チューニングにも対応可能）。

## **📁 プロジェクト構成**

\#YinChroma/  
 ├ README.md            # 本ファイル  
 ├ config.ini           \# 設定ファイル（振幅閾値など）  
 ├ main.py              \# メインエントリー（Flet UI）  
 ├ soundhandler.py      \# 音声再生管理 (pygame.mixer)  
 ├ pitchdetector.py     \# ピッチ検出エンジン (YIN Algorithm)  
 ├ requirements.txt     \# 依存ライブラリ一覧  
 ├ log/                 \# 実行ログ出力先  
 └ sound/               \# お手本WAVファイル格納先

## **🚀 セットアップ**

### **1\. 依存ライブラリのインストール**

以下のコマンドを実行して、必要なパッケージをインストールしてください。

`pip install \-r requirements.txt`

**主要な依存関係:**

* flet: UIフレームワーク  
* pyaudio: リアルタイム音声入力  
* numpy: 数値演算（信号処理）  
* pygame: 音声再生（ミキサー）

### **2\. 実行**

`python main.py`

## **📖 使い方**

### **1\. ピッチ判定（Tuner）**

* アプリを起動するとマイク入力を開始します。  
* 弦を弾くと、中央に「どの弦に近いか」と「ズレ（cent）」が表示されます。  
* **OK (-5.0 \~ \+5.0 cent)** と表示されるまでペグを調整してください。  
* 入力レベルが低い場合は、音量メーターを確認しながらマイクの距離を調整してください。

### **2\. お手本再生（Reference Tone）**

* 下部の弦ボタン（6弦〜1弦など）を押すと、その音のループ再生が始まります。  
* **ループ再生/停止** ボタンでトグル操作が可能です。  
* **ヘッドセットモード** をONにすると、お手本を鳴らしながら自分の音を判定できます（イヤホン推奨）。

## **📝 更新履歴**

### **v1.0**

* プロジェクト名を **\#YinChroma** に正式決定。  
* UIライブラリを Tkinter から **Flet** へ完全移行し、デザインを一新。  
* ピッチ検出アルゴリズムを FFT から **YIN** に変更し、低音域の安定性を向上。  
* 音量レベルの視覚化（ProgressBar）を実装。  
* 設定ファイル config.ini による振幅閾値の永続化に対応。

## **⚖️ 免責事項**

このソフトウェアは、個人のギター練習や調整を支援するためのツールです。環境（マイク性能やノイズ）により判定結果に誤差が生じる場合があります。
